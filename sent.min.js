!function(){function e(r){null!=document.body?(n(),t(),i(),o(),l()):window.requestAnimationFrame(e)}function n(){var e=$("style");document.head.appendChild(e),["html{box-sizing:content-box;}","*,*:before,*:after{box-sizing:inherit;}","html,body{height:100%;width:100%;margin:0;}","#root{height:100%;display:flex;flex-direction:column;}","#main{height:100%;width:100%;display:flex;flex-direction:row;}","#editView{height:100%;display:none;}","#footerView{display:none;flex-direction:row;margin:2px;padding:2px;height:"+F+";}","#slideView{display:flex;align-items:center;justify-content:center;width:100%;}",".slide{white-space:pre;padding:1vw;line-height:100%;}",".fill{overflow:hidden;background-repeat:no-repeat;background-size:contain;background-position:center;background-origin:content-box;height:100%;width:100%;}",".editor{height:calc(100% - 10px);resize:horizontal;font-size:14px;}","#file{display:none}"].map(function(n,t){e.sheet.insertRule(n,t)})}function t(){(C=$("div")).id="root",(T=$("div")).id="editView",(W=$("textarea")).className="editor",W.cols=40,T.appendChild(W),(z=$("div")).id="footerView";var e=$("input");e.id="save",e.type="button",e.value="save",e.onclick=v,z.appendChild(e);var n=$("input");n.id="load",n.type="button",n.value="load",n.onclick=g,z.appendChild(n),(H=$("input")).id="file",H.type="file",H.onchange=y,z.appendChild(H);var t=$("input");t.id="new",t.type="button",t.value="new",t.onclick=w,z.appendChild(t),(L=$("div")).id="main",(A=$("div")).id="slideView",L.appendChild(T),L.appendChild(A),C.appendChild(L),C.appendChild(z),document.body.appendChild(C)}function i(){var e=!1;W.onmousedown=function(n){e=!0},window.onmousemove=b(function(n){e&&u(A)}),window.onmouseup=function(n){e=!1,u(A)},W.onkeyup=k(d,M,!1),W.oninput=k(d,M,!1),W.onclick=k(d,M,!1)}function o(){var e=document.querySelectorAll("script"),n=0==e.length?"No Data":e[0].innerText,t=r(n);W.value=n,a(t[B])}function l(){document.onkeydown=function(e){if(document.activeElement==document.body){if(V.includes(e.keyCode))--B<0&&(B=E.length-1);else if(O.includes(e.keyCode))++B==E.length&&(B=0);else if(36==e.keyCode)B=0;else if(35==e.keyCode)B=E.length-1;else{if(27!=e.keyCode)return;p()}window.requestAnimationFrame(function(){a(E[B])})}else 27==e.keyCode?p():window.requestAnimationFrame(function(){u(A)})},window.onresize=b(function(e){a(E[B])})}function r(e,n){function t(){l=R,r=!1,c++}function i(e){return e.replace(/\\(.)/g,"$1")}function o(e){void 0!=n&&e==n&&(B=c)}E=[],U=[],e.endsWith("\n")||(e+="\n");var l,r,a=e.split("\n"),c=-1;t();for(var u=0,d=0,p=a.length;d<p;d++){var h=a[d];h.startsWith("#")?o(d):"\\"==h?E.length>0&&E[E.length-1]!=q&&(E.push(q),U[E.length-1]=u,o(d),t()):""==h.trim()?l!=R&&(E.push((l.endsWith("<br>")?l.slice(0,-4):l)+S),U[E.length-1]=u,o(d),t()):(h.startsWith("@")?(l="<div style='background-image: url(\""+h.slice(1)+"\");' class='fill'>",r=!0):r||(l+=s(i(h.startsWith("\\")?h.slice(1):h))+"<br>"),o(d)),u+=h.length+1}return E}function a(e){void 0===e&&(e=""),A.innerHTML=e,u(A)}function c(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function u(e){var n=N;e.style.fontSize=n+"vw";for(var t=document.body;n>P&&!(!c(e)&&t.scrollHeight<=t.clientHeight&&t.scrollWidth<=t.clientWidth);)n-=Y,e.style.fontSize=n+"vw"}function d(){var e=W.value.substr(0,W.selectionStart).split("\n").length-1;a((E=r(W.value,e))[B])}function s(e){return e.replace(/[&<"']/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;";default:return"&#039;"}})}function p(){D?h():f()}function h(){document.activeElement&&document.activeElement.blur(),A.focus(),T.style.display="none",z.style.display="none",D=!1,u(A)}function f(){T.style.display="block",z.style.display="flex",W.selectionStart=W.selectionEnd=U[B]-1,W.focus(),D=!0}function v(){if("Blob"in window){if(j=prompt("Please enter file name to save",j)){var e="<meta charset='utf-8'>\r\n<script src='http://unpkg.com/sentjs'>\r\n"+W.value.replace(/\n/g,"\r\n")+"<\/script>",n=new Blob([e],{type:"text/plain"});if("msSaveOrOpenBlob"in navigator)navigator.msSaveOrOpenBlob(n,j);else{var t=$("a");t.download=j,t.innerHTML="Download File","webkitURL"in window?t.href=window.webkitURL.createObjectURL(n):(t.href=window.URL.createObjectURL(n),t.onclick=m,t.style.display="none",document.body.appendChild(t)),t.click()}}}else alert("Your browser does not support the HTML5 Blob.")}function m(e){document.body.removeChild(e.target)}function w(){h(),W.value="",W.scrollTop=0,B=0,a((E=r(W.value))[B]),f(),u(A)}function g(){H.click()}function y(e){var n=new FileReader;n.onload=function(e){var t=n.result,i=t.split("\n");t="";for(var o=0,l=i.length;o<l;o++){var c=i[o],u=c.toLowerCase();u.startsWith("<meta charset")||u.startsWith("<script")||u.startsWith("<\/script>")||(t+=c+"\n")}h(),W.value=t,W.scrollTop=0,B=0,a((E=r(W.value))[B])},n.readAsText(e.target.files[0])}function b(e,n,t){n=n||250;var i,o,l,r=null,a=0;t||(t={});var c=function(){a=!1===t.leading?0:Date.now(),r=null,l=e.apply(i,o),r||(i=o=null)};return function(){var u=Date.now();a||!1!==t.leading||(a=u);var d=n-(u-a);return i=this,o=arguments,d<=0||d>n?(r&&(clearTimeout(r),r=null),a=u,l=e.apply(i,o),r||(i=o=null)):r||!1===t.trailing||(r=setTimeout(c,d)),l}}function k(e,n,t){var i,o,l=function(n,t){i=null,t&&(o=e.apply(n,t))},r=x(function(r){if(i&&clearTimeout(i),t){var a=!i;i=setTimeout(l,n),a&&(o=e.apply(this,r))}else i=G(l,n,this,r);return o});return r.cancel=function(){clearTimeout(i),i=null},r}function x(e,n){return n=null==n?e.length-1:+n,function(){for(var t=Math.max(arguments.length-n,0),i=Array(t),o=0;o<t;o++)i[o]=arguments[o+n];switch(n){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var l=Array(n+1);for(o=0;o<n;o++)l[o]=arguments[o];return l[n]=i,e.apply(this,l)}}var C,T,W,z,L,A,H,R="<div class='slide'>",S="</div>",q=R+S,F="30px",O=[39,13,32,76,74,40,78],V=[37,8,72,75,38,80],B=0,E=[],U=[],j="presentation.html",D=!1,M=300,N=20,P=.5,Y=.25,$=function(e){return document.createElement(e)};window.requestAnimationFrame(e);var G=x(function(e,n,t){return setTimeout(function(){return e.apply(null,t)},n)})}();