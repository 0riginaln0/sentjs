!function () { var e, n, t, i, l, o, r, a, c = "<div class='slide'>", s = "</div>", u = c + s, d = [39, 13, 32, 76, 74, 40, 78], p = [37, 8, 72, 75, 38, 80], f = 0, h = [], $ = [], v = "presentation.html", g = !1, y = function (e) { return document.createElement(e) }; function m(c) { var s, u, $, v, g, b, x, W; if (null == document.body) { window.requestAnimationFrame(m); return } s = y("style"), document.head.appendChild(s), ["html{box-sizing:content-box;}", "*,*:before,*:after{box-sizing:inherit;}", "html,body{height:100%;width:100%;margin:0;}", "#root{height:100%;display:flex;flex-direction:column;}", "#main{height:100%;width:100%;display:flex;flex-direction:row;}", "#editView{height:100%;display:none;}", "#footerView{display:none;flex-direction:row;margin:2px;padding:2px;height:30px;}", "#slideView{display:flex;align-items:center;justify-content:center;width:100%;}", ".slide{white-space:pre;padding:1vw;line-height:100%;}", ".fill{overflow:hidden;background-repeat:no-repeat;background-size:contain;background-position:center;background-origin:content-box;height:100%;width:100%;}", ".editor{height:calc(100% - 10px);resize:horizontal;font-size:14px;font-family: monospace;}", "#file{display:none}", "#fontSelect { margin-left: 10px; }"].map(function (e, n) { s.sheet.insertRule(e, n) }), (e = y("div")).id = "root", (n = y("div")).id = "editView", (t = y("textarea")).className = "editor", t.cols = 40, n.appendChild(t), (i = y("div")).id = "footerView", (u = y("input")).id = "save", u.type = "button", u.value = "save", u.onclick = z, i.appendChild(u), ($ = y("input")).id = "load", $.type = "button", $.value = "load", $.onclick = A, i.appendChild($), (r = y("input")).id = "file", r.type = "file", r.onchange = E, i.appendChild(r), (v = y("input")).id = "new", v.type = "button", v.value = "new", v.onclick = R, i.appendChild(v), (a = y("select")).id = "fontSelect", ["Times New Roman", "Arial", "monospace", "Courier New", "Georgia", "Verdana", "Comic Sans MS", "Impact", "Trebuchet MS"].forEach(function (e) { var n = y("option"); n.value = e, n.textContent = e, "Times New Roman" === e && (n.selected = !0), a.appendChild(n) }), i.appendChild(a), (l = y("div")).id = "main", (o = y("div")).id = "slideView", l.appendChild(n), l.appendChild(o), e.appendChild(l), e.appendChild(i), document.body.appendChild(e), g = !1, t.onmousedown = function (e) { g = !0 }, window.onmousemove = H(function (e) { g && C(o) }), window.onmouseup = function (e) { g = !1, C(o) }, t.onkeyup = V(k, 300, !1), t.oninput = V(k, 300, !1), t.onclick = V(k, 300, !1), W = _(x = 0 == (b = document.querySelectorAll("script")).length ? "No Data" : b[0].innerText), t.value = x, w(W[f]), a = document.getElementById("fontSelect"), O(), document.onkeydown = function (e) { if (document.activeElement != document.body) { 27 == e.keyCode ? S() : window.requestAnimationFrame(function () { C(o) }); return } if (p.includes(e.keyCode)) --f < 0 && (f = h.length - 1); else if (d.includes(e.keyCode)) ++f == h.length && (f = 0); else if (36 == e.keyCode) f = 0; else if (35 == e.keyCode) f = h.length - 1; else { if (27 != e.keyCode) return; S() } window.requestAnimationFrame(function () { w(h[f]) }) }, window.onresize = H(function (e) { w(h[f]) }), a.onchange = O } function _(e, n) { h = [], $ = [], e.endsWith("\n") || (e += "\n"); var t, i, l = e.split("\n"), o = -1; function r() { t = c, i = !1, o++ } function a(e) { return e.replace(/\\(.)/g, "$1") } function d(e) { void 0 != n && e == n && (f = o) } r(); for (var p = 0, v = 0, g = l.length; v < g; v++) { var y = l[v]; y.startsWith("#") ? d(v) : "\\" == y ? h.length > 0 && h[h.length - 1] != u && (h.push(u), $[h.length - 1] = p, d(v), r()) : "" == y.trim() ? t != c && (h.push((t.endsWith("<br>") ? t.slice(0, -4) : t) + s), $[h.length - 1] = p, d(v), r()) : (y.startsWith("@") ? (t = "<div style='background-image: url(\"" + y.slice(1) + "\");' class='fill'>", i = !0) : i || (t += x(a(y.startsWith("\\") ? y.slice(1) : y)) + "<br>"), d(v)), p += y.length + 1 } return h } function w(e) { void 0 === e && (e = ""), o.innerHTML = e, C(o) } function b(e) { return e.scrollHeight > e.clientHeight || e.scrollWidth > e.clientWidth } function C(e) { var n = 20; e.style.fontSize = n + "vw"; for (var t = document.body; n > .5 && (b(e) || !(t.scrollHeight <= t.clientHeight) || !(t.scrollWidth <= t.clientWidth));)n -= .25, e.style.fontSize = n + "vw" } function k() { var e = t.value.substr(0, t.selectionStart).split("\n").length - 1; w((h = _(t.value, e))[f]) } function x(e) { return e.replace(/[&<"']/g, function (e) { switch (e) { case "&": return "&amp;"; case "<": return "&lt;"; case '"': return "&quot;"; default: return "&#039;" } }) } function S() { g ? W() : T() } function W() { document.activeElement && document.activeElement.blur(), o.focus(), n.style.display = "none", i.style.display = "none", g = !1, C(o) } function T() { n.style.display = "block", i.style.display = "flex", t.selectionStart = t.selectionEnd = $[f] - 1, t.focus(), g = !0 } function z() { if ("Blob" in window) { if (v = prompt("Please enter file name to save", v)) { var e = "<meta charset='utf-8'>\r\n<script src='http://unpkg.com/sentjs'>\r\n" + t.value.replace(/\n/g, "\r\n") + "</script>", n = new Blob([e], { type: "text/plain" }); if ("msSaveOrOpenBlob" in navigator) navigator.msSaveOrOpenBlob(n, v); else { var i = y("a"); i.download = v, i.innerHTML = "Download File", "webkitURL" in window ? i.href = window.webkitURL.createObjectURL(n) : (i.href = window.URL.createObjectURL(n), i.onclick = L, i.style.display = "none", document.body.appendChild(i)), i.click() } } } else alert("Your browser does not support the HTML5 Blob.") } function L(e) { document.body.removeChild(e.target) } function R() { W(), t.value = "", t.scrollTop = 0, f = 0, w((h = _(t.value))[f]), T(), C(o) } function A() { r.click() } function E(e) { var n = new FileReader; n.onload = function (e) { var i = n.result, l = i.split("\n"); i = ""; for (var o = 0, r = l.length; o < r; o++) { var a = l[o], c = a.toLowerCase(); c.startsWith("<meta charset") || c.startsWith("<script") || c.startsWith("</script>") || (i += a + "\n") } W(), t.value = i, t.scrollTop = 0, f = 0, w((h = _(t.value))[f]) }, n.readAsText(e.target.files[0]) } function H(e, n, t) { n = n || 250; var i, l, o, r = null, a = 0; t || (t = {}); var c = function () { a = !1 === t.leading ? 0 : Date.now(), r = null, o = e.apply(i, l), r || (i = l = null) }; return function () { var s = Date.now(); a || !1 !== t.leading || (a = s); var u = n - (s - a); return i = this, l = arguments, u <= 0 || u > n ? (r && (clearTimeout(r), r = null), a = s, o = e.apply(i, l), r || (i = l = null)) : r || !1 === t.trailing || (r = setTimeout(c, u)), o } } function V(e, n, t) { var i, l, o = function (n, t) { i = null, t && (l = e.apply(n, t)) }, r = q(function (r) { if (i && clearTimeout(i), t) { var a = !i; i = setTimeout(o, n), a && (l = e.apply(this, r)) } else i = F(o, n, this, r); return l }); return r.cancel = function () { clearTimeout(i), i = null }, r } function q(e, n) { return n = null == n ? e.length - 1 : +n, function () { for (var t = Math.max(arguments.length - n, 0), i = Array(t), l = 0; l < t; l++)i[l] = arguments[l + n]; switch (n) { case 0: return e.call(this, i); case 1: return e.call(this, arguments[0], i); case 2: return e.call(this, arguments[0], arguments[1], i) }var o = Array(n + 1); for (l = 0; l < n; l++)o[l] = arguments[l]; return o[n] = i, e.apply(this, o) } } window.requestAnimationFrame(m); var F = q(function (e, n, t) { return setTimeout(function () { return e.apply(null, t) }, n) }); function O() { var e = a.value; o.style.fontFamily = e } }();